Setup Bind DNS


#dnf install bind bind-utils -y
#vim /etc/resolv.conf
Generated by NetworkManager
search example.com
nameserver 192.168.122.97
~                                   


#vim /etc/named.conf


edit:
options {
            listen-on port 53 { 127.0.0.1;  192.168.122.97; };    ## ip of bind server
allow-query         { localhost; 192.168.122.0/24;  };
recursion yes;




At last edit:


//Forward Zone
  zone "example.com" IN {
  type master;
  file "localhost.forward.com";
  allow-update { none; };
  allow-query { any; };
};


//Reverse Zone
   zone "122.168.192.in-addr.arpa" IN {
   type master;
   file "localhost.reverse.com";
   allow-update { none; };
   allow-query { any; };


};










#vim /var/named/localhost.forward.com


$TTL 86400
@ IN SOA server.example.com. root (
                                                    2020011800 ;Serial
                                                    3600 ;Refresh
                                                    1800 ;Retry
                                                    604800 ;Expire
                                                    86400 ;Minimum TTL
)


@  IN  NS   server.example.com.
@  IN  A   192.168.122.97
server.example.com.  IN  A 192.168.122.97
master0.example.com.  IN  A  192.168.122.10
worker0.example.com.  IN  A  192.168.122.11
worker1.example.com.  IN  A  192.168.122.12






#vim /var/named/localhost.reverse.com


$TTL 86400
@ IN SOA server.example.com. root. (
                                                    2020011800 ;Serial
                                                    3600 ;Refresh
                                                    1800 ;Retry
                                                    604800 ;Expire
                                                    86400 ;Minimum TTL
)


@  IN  NS  server.example.com.
server IN A 192.168.122.97
97  IN  PTR  server.example.com.
10  IN  PTR  master0.example.com.
11  IN  PTR  worker0.example.com.
12  IN  PTR  worker1.example.com.










The Domain Name System (DNS) is a hierarchical distributed naming system for computers, services, or any resource connected to the Internet or a private network. It associates various information with domain names assigned to each of the participating entities.
Most importantly, it translates domain names meaningful to humans into the numerical identifiers associated with networking equipment for the purpose of locating and addressing these devices worldwide.


BIND stands for Berkeley Internet Name Domain, a software that provides an ability to perform name to ip conversion.


Firewall
Add an allow rule in the firewall to let clients connect to the DNS server for name resolution.
firewall-cmd --permanent --add-port=53/udp
firewall-cmd --reload
Verify Zones
Visit any client machine and add a DNS server ip address in /etc/resolv.conf.
nameserver 192.168.X.X
If Network Manager manages the networking then place the following entry in /etc/sysconfig/network-scripts/ifcfg-eXX file.
DNS1=192.168.x.x
Restart network service.


Note: IP should be static


There are some special keywords for Zone Files:
A – A record
NS – Name Server
MX – Mail for Exchange
CNAME – Canonical Name
PTR – Pointer
SOA – Start of Authority
Following are the explanations of each configuration we used in the file.
1. listen-on port 53 – This is used for the DNS to listen in available interfaces.
2. Master DNS – Define your Master DNS IP address to listen to the query.
3. Slave DNS – Define your Slave DNS, which is used to sync our zone information to resolve the hosts from Master.
4. recursion no – If it's set to yes, recursive queries will make the server into DDOS attack.
5. Zone Name – Define your Zone name here defined as tecminlocal.com.
6. type master – As this system was configured for a master server, for upcoming slave server this will be slave.
7. local.fwd.zone – This file has the host information for this zone.
8. allow-update none – If none will set. it won’t use Dynamic DNS (DDNS).